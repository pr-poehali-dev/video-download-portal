import { useState } from "react";
import Icon from "@/components/ui/icon";
import FeatureCard from "./FeatureCard";

interface Comment {
  id: number;
  author: string;
  text: string;
  timestamp: string;
  likes: number;
}

const CommentSystem = () => {
  const [comments, setComments] = useState<Comment[]>([
    {
      id: 1,
      author: "–†–µ–∂–∏—Å—Å—ë—Ä –£–∂–∞—Å–æ–≤",
      text: "–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è –¥–ª—è —Å–µ—Ä–∏–∞–ª–∞! –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ —Ç—Ä–µ—Ç—å–µ–º —ç–ø–∏–∑–æ–¥–µ.",
      timestamp: "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥",
      likes: 5,
    },
    {
      id: 2,
      author: "–°—Ü–µ–Ω–∞—Ä–∏—Å—Ç –ú—Ä–∞–∫–∞",
      text: "–§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ü–µ–Ω–∞ –ø–æ–ª—É—á–∏–ª–∞—Å—å —Å–ª–∏—à–∫–æ–º –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π. –ü—Ä–µ–¥–ª–∞–≥–∞—é –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç.",
      timestamp: "5 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥",
      likes: 3,
    },
  ]);

  const [newComment, setNewComment] = useState("");

  const addComment = () => {
    if (newComment.trim()) {
      const comment: Comment = {
        id: Date.now(),
        author: "–°–æ–∑–¥–∞—Ç–µ–ª—å –ö–æ—à–º–∞—Ä–æ–≤",
        text: newComment,
        timestamp: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
        likes: 0,
      };
      setComments([comment, ...comments]);
      setNewComment("");
    }
  };

  return (
    <FeatureCard
      title="üíÄ –°–∏—Å—Ç–µ–º–∞ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤"
      description="–û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–æ–≤ —Å –∫–æ–º–∞–Ω–¥–æ–π"
      icon="üí¨"
      className="animate-float"
    >
      {/* Add comment form */}
      <div className="space-y-3">
        <textarea
          value={newComment}
          onChange={(e) => setNewComment(e.target.value)}
          placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –∂—É—Ç–∫–∏–º–∏ –∏–¥–µ—è–º–∏..."
          className="w-full p-3 rounded-lg bg-secondary/50 border border-primary/30 text-foreground placeholder-muted-foreground resize-none h-20"
        />
        <button
          onClick={addComment}
          className="halloween-button flex items-center gap-2"
          disabled={!newComment.trim()}
        >
          <Icon name="Send" size={16} />
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ë–µ–∑–¥–Ω—É
        </button>
      </div>

      {/* Comments list */}
      <div className="space-y-3 max-h-60 overflow-y-auto">
        {comments.map((comment) => (
          <div
            key={comment.id}
            className="bg-secondary/30 rounded-lg p-4 border border-primary/20"
          >
            <div className="flex items-center justify-between mb-2">
              <span className="font-medium text-primary text-sm">
                üë§ {comment.author}
              </span>
              <span className="text-xs text-muted-foreground">
                {comment.timestamp}
              </span>
            </div>
            <p className="text-sm text-foreground mb-2">{comment.text}</p>
            <div className="flex items-center gap-4">
              <button className="flex items-center gap-1 text-xs text-muted-foreground hover:text-primary transition-colors">
                <Icon name="Heart" size={12} />
                {comment.likes}
              </button>
              <button className="text-xs text-muted-foreground hover:text-primary transition-colors">
                –û—Ç–≤–µ—Ç–∏—Ç—å
              </button>
            </div>
          </div>
        ))}
      </div>
    </FeatureCard>
  );
};

export default CommentSystem;
